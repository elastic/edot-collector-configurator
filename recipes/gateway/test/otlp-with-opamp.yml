args:
  - id: elastic_endpoint
    env: ELASTIC_URL
  - id: elastic_api_key
    env: ELASTIC_API_KEY
features:
  otlp:
    source: receivers/otlp.yml
    configurations: [ http, grpc ]
  elasticapm-connector:
    source: connectors/elasticapm.yml
  elasticsearch-exporter:
    source: exporters/elasticsearch.yml
    vars:
      elastic_endpoint: $args.elastic_endpoint
      elastic_api_key: $args.elastic_api_key
services:
  pipelines:
    traces:
      receivers: [ $features.otlp ]