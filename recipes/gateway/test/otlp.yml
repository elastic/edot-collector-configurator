description: Receives OTLP data over HTTP and gRPC and exports it to Elasticsearch
args:
  elastic_endpoint:
    description: Your Elasticsearch endpoint
    env: ELASTIC_URL
  elastic_api_key:
    description: Your Elasticseatch API Key
    env: ELASTIC_API_KEY
components:
  otlp:
    source: receivers/otlp.yml
    configurations: [ http, grpc ]
  elasticapm-connector:
    source: connectors/elasticapm.yml
  elasticsearch:
    source: exporters/elasticsearch.yml
    vars:
      elastic_endpoint: $args.elastic_endpoint
      elastic_api_key: $args.elastic_api_key
services:
  pipelines:
    traces:
      receivers: [ $components.otlp ]